# 无冲突更新指南（work 分支）

为减少后续拉取上游代码时的冲突，推荐按照以下流程操作：

1. **保持工作分支干净**：在新增改动前先提交或暂存当前修改，确保 `git status` 输出干净。
2. **先拉取再开发**：开发前执行
   ```bash
   git fetch origin
   git rebase origin/main
   ```
   这样可以把本地 `work` 分支基于最新的 `main` 重新应用，避免合并提交引入的大块冲突。
3. **分批提交**：将相关改动拆分成小而独立的提交，便于在 rebase 过程中逐个处理。
4. **自动检测冲突标记**：在提交前运行
   ```bash
   rg "<<<<<<<|>>>>>>>"
   ```
   确认文件中没有遗留的冲突标记。
5. **基础校验**：保持与 MindSpore 1.7.0 / CANN 5.1.0 环境兼容，执行
   ```bash
   python -m compileall monitoring/analysis fault_detection utils
   ```
   以快速发现语法问题。
6. **必要时跳过大文件**：如需在 `*.onnx`、`*.h5` 这类生成文件上尝试合并，优先重新生成而不是手工解决冲突，减少无意义的二进制差异。

按照上述步骤操作，后续更新时大多数冲突都可以提前规避或快速解决。
